!function(e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e:window.perfTrack=e}(function(e){for(var n=["ms","moz","webkit","o"],i="RequestAnimationFrame",t="CancelAnimationFrame",o="CancelRequestAnimationFrame",r=0;r<n.length&&!e.requestAnimationFrame;++r)e.requestAnimationFrame=e[n[r]+i],e.cancelAnimationFrame=e[n[r]+t]||e[n[r]+o];return"undefined"!=typeof e&&"undefined"!=typeof e.performance&&"undefined"!=typeof e.document&&"function"==typeof e.requestAnimationFrame&&"function"==typeof e.cancelAnimationFrame&&"undefined"==typeof e.perfTrack?function(n,i){function t(){var e=v.now(),n=e-q;return n>u&&(i(n),d)?f():(q=e,void(F=y(t)))}function o(){h=!0,F||(q=v.now(),F=y(t))}function r(){F&&(l(F),F=null)}function a(){if(!c){if(p.hidden)return r();if(h)return o();var e=v.now();s(g),g=A(o,e-b+m)}}function f(){w||(w=!0,r(),p.removeEventListener("visibilitychange",a))}var u=n.frameDurationThreshold||200,m=n.startAfter||1e3,c=n.ignoreVisibilityChange||!1,d=n.bailOut||!1,l=e.cancelAnimationFrame,s=e.clearTimeout,p=e.document,v=e.performance,y=e.requestAnimationFrame,A=e.setTimeout,F=null,w=!1,h=!1,b=v.now(),q=b,g=A(o,m);return p.addEventListener("visibilitychange",a),f}:void 0}(window));